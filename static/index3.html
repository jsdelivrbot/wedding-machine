<html>
	<head>
	<title>Wedding Machine</title>
	<style>
	html, body { margin: 0; padding: 0; 
	background-color: #000;
	}
	#slotmachine {
		width: 640px; height: 480px;
		position: absolute;
		left: 50%;
		margin-left: -320px;
	}
	h1 { color: #fff; text-align: center; }
	
	</style>
</head>
<body>
<h1>Premi il pulsante per iniziare a giocare!</h1>
<audio id="idle-music" src="/idle-music.ogg" loop autoplay></audio>
<script src="/three.js"></script>
<script src="/tween.js"></script>
<script src="/jquery.js"></script>
<script src="/eventable.js"></script>
<script src="/rsvp.js"></script>
<script src="/machine.js"></script>
<script>
$(function() {
	Machine.startDemo();
	var music = $('#idle-music')[0];
	
	$(document).keyup(function(e) {
		if (e.which != 83) { // Tasto S
			return;
		}
		if (Machine.inGame) {
			return;
		}
		Machine.stopDemo().then(function() {
			// spegne la musica
			var audio = {volume: music.volume},
				tween = new TWEEN.Tween(audio)
					.to({volume: 0}, 750)
					.onUpdate(function() {
						music.volume = audio.volume;
					})
					.start();
			console.log('Pronto per giocare');
			Machine.inGame = true;
		});
	});
});

</script>
</body>
</html>
